{% extends "base.html" %}
{% block title %}ダッシュボード - X Trend Bot{% endblock %}
{% block content %}

<h1 class="text-2xl font-bold mb-6">ダッシュボード</h1>

<!-- 統計 -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
  <div class="bg-white rounded-lg shadow p-5">
    <div class="text-sm text-gray-500">監視ユーザー</div>
    <div class="text-3xl font-bold mt-1">{{ enabled_users }}</div>
    <a href="/users" class="text-blue-500 text-sm hover:underline">管理する →</a>
  </div>
  <div class="bg-white rounded-lg shadow p-5">
    <div class="text-sm text-gray-500">ジャンル</div>
    <div class="text-3xl font-bold mt-1">{{ enabled_genres }}</div>
    <a href="/genres" class="text-blue-500 text-sm hover:underline">管理する →</a>
  </div>
  <div class="bg-white rounded-lg shadow p-5">
    <div class="text-sm text-gray-500">投稿数</div>
    <div class="text-3xl font-bold mt-1">{{ history|length }}</div>
    <a href="/history" class="text-blue-500 text-sm hover:underline">履歴を見る →</a>
  </div>
</div>

<!-- 最近の投稿 -->
<h2 class="text-lg font-bold mb-3">最近の投稿</h2>
{% if history %}
  <div class="space-y-3">
    {% for post in history[:5] %}
    <div class="bg-white rounded-lg shadow p-4">
      <p class="whitespace-pre-wrap text-sm">{{ post.text }}</p>
      <div class="text-xs text-gray-400 mt-2">{{ post.posted_at[:19] }}</div>
    </div>
    {% endfor %}
  </div>
{% else %}
  <div class="bg-white rounded-lg shadow p-6 text-center text-gray-400">
    まだ投稿がありません
  </div>
{% endif %}

{% endblock %}
